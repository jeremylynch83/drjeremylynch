/* =========================================
   Jeremy Lynch Neuroradiology - Main CSS (refactored)
   - Centralised styles
   - Design tokens + accessibility
   - Brand centred, menu right (all viewports)
   ========================================= */

/* ===== Design tokens ===== */
:root{
  --clr-bg:#ffffff;
  --clr-text:#222222;
  --clr-text-muted:#555555;
  --clr-heading:#000000;
  --clr-brand:#0078d4;
  --clr-card-shadow:0 2px 6px rgba(0,0,0,0.08);
  --clr-card-shadow-hover:0 8px 20px rgba(0,0,0,0.12);

  --ff-base:"Source Sans Pro",system-ui,-apple-system,"Segoe UI",Arial,sans-serif;

  --fs-body:1rem;
  --fs-p:clamp(1rem,0.98rem + 0.2vw,1.125rem);
  --fs-h3:clamp(1.25rem,1.1rem + 0.8vw,1.625rem);
  --fs-h4:clamp(1.125rem,1.05rem + 0.5vw,1.375rem);

  --navbar-height:72px;
  --radius-md:12px;
  --radius-sm:8px;

  --elevate:150ms ease;
}

/* ===== Base & Typography ===== */
html,body{
  height:100%;
  margin:0;
  padding:0;
  color:var(--clr-text);
  background:var(--clr-bg);
  line-height:1.8;
  font-family:var(--ff-base) !important;
  font-size:16px !important;
  font-weight:400 !important; /* keep normal text regular */
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  scroll-padding-top:var(--navbar-height);
  scroll-behavior:smooth;
}

h1,h2,h3,h4,h5,h6{
  font-family:inherit;
  color:var(--clr-heading);
  font-weight:900;
  margin:0;
}
h3{ text-align:center; letter-spacing:0.06em; padding-top:32px; font-size:var(--fs-h3); }
h4{ text-align:center; font-size:var(--fs-h4); }

p{ color:var(--clr-text); font-size:var(--fs-p); text-align:left; margin:0 0 1em; }

/* ===== Links & focus visibility ===== */
a{ color:inherit; text-decoration-thickness:0.08em; text-underline-offset:0.15em; }
a:hover{ color:var(--clr-brand); }
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
.nav-link:focus-visible,
.btn:focus-visible{
  outline:2px solid var(--clr-brand);
  outline-offset:2px;
  border-radius:6px;
}

/* ===== Utilities ===== */
.text-smallcaps{ text-transform:uppercase; letter-spacing:0.03em; }
.w3-wide{ letter-spacing:0.1em; }
.w3-hover-opacity{ cursor:pointer; }
.fade{ transition:opacity 0.3s ease-in; }
.font-serif{ font-family:Georgia,"Times New Roman",Times,serif }
.object-fit-cover{ object-fit:cover }

/* ===== Layout: main column and media ===== */
main{ padding-top:var(--navbar-height); max-width:800px; margin:0 auto; }

/* Constrain article media inside the main text column */
main .col-md-8 :where(img,picture,svg,video,canvas){ max-width:100%; height:auto; }

/* Make standalone images block-level and centred */
main .col-md-8 img{ display:block; margin-left:auto; margin-right:auto; }

/* Optional: round figures without upscaling small images */
main .col-md-8 figure > :where(img,picture,svg,video,canvas){ border-radius:0.5rem; }

/* Style figure captions */
main .col-md-8 figcaption{
  font-size:0.875rem;
  font-weight:200;
  line-height:1.4;
  color:var(--clr-text-muted);
  text-align:center;
  margin-top:0.4rem;
}

/* Number figures within main column */
main .col-md-8{ counter-reset:figure; }
main .col-md-8 figure figcaption::before{
  counter-increment:figure;
  content:"Figure " counter(figure) ": ";
  font-weight:700;
  color:var(--clr-heading);
}

/* Global figcaption alignment fallback */
figcaption{ text-align:center; }

/* ===== Buttons ===== */
.btn{ border-radius:0 !important; font-size:0.8rem !important; font-weight:400; padding:0.45rem 1rem; }

/* ===== Navbar: brand centred, menu right ===== */
.navbar .container{
  display:grid !important;
  grid-template-columns:1fr auto 1fr; /* left spacer | brand | right area */
  align-items:center;
}
.navbar .navbar-brand{
  grid-column:2;
  justify-self:center;
  text-align:center;
}
.navbar .navbar-toggler{
  grid-column:3;
  justify-self:end;
  display:flex;
  align-items:center;
  justify-content:center;
}
.navbar .navbar-collapse{
  grid-column:3; /* visible menu sits on the right */
  justify-self:end;
}
.navbar .navbar-brand small{ line-height:1.2; color:var(--clr-text-muted); }
.navbar .nav-link:hover,
.navbar .nav-link:focus{ color:var(--clr-brand); }
.navbar .nav-link[aria-current="page"]{ font-weight:700; }

/* Mobile (< md): collapse spans full width and aligns items right when open */
@media (max-width:767.98px){
  .navbar .navbar-collapse{ grid-column:1 / -1; } /* drop below brand when expanded */
  .navbar .navbar-collapse .navbar-nav{ width:100%; align-items:flex-end; }
}

/* â‰¥ md: show menu on right, keep brand centred */
@media (min-width:768px){
  .navbar .navbar-collapse{ display:flex !important; justify-content:flex-end; }
}

/* ===== Hero / headings microtype ===== */
.consultant-title{
  font-size:clamp(0.55rem,1.2vw,0.75rem);
  line-height:1.2;
  display:block;
  letter-spacing:-0.12em;
  font-weight:100;
}

/* ===== Profile section ===== */
.profile-container{ display:flex; flex-wrap:wrap; align-items:center; max-width:800px; margin:0 auto; gap:0; }
.profile-image-col,.profile-text-col{ padding:20px; }
.profile-image-col{ flex:1 1 33.33%; display:flex; align-items:center; justify-content:center; }
.profile-text-col{ flex:1 1 66.67%; min-width:0; }
.profile-image{ width:100%; max-width:100%; height:auto; display:block; border-radius:0.5rem; }
@media (min-width:992px){ .profile-image{ max-width:360px; } }
@media (max-width:600px){ .profile-image-col,.profile-text-col{ flex:1 1 100%; } }

/* ===== Media elements & custom text ===== */
.your-video-class{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; object-position:center; transform:translate(0,0); filter:grayscale(20%);
}
.main-title{ font-size:clamp(1.25rem,1.05rem + 1.2vw,1.75rem); letter-spacing:0.06em; }
.letters{ font-size:clamp(0.9rem,0.8rem + 0.6vw,1.25rem); letter-spacing:0.12em; }

/* ===== Treatments & pictures ===== */
.treatment{ padding:10px; }
.picture-main{ margin:0 50px; }
.picture-img{ width:100%; height:auto; border-radius:0.5rem; display:block; }
.picture-title{
  color:var(--clr-heading);
  text-align:center;
  font-size:1.125rem;
  font-family:var(--ff-base);
  font-weight:600;
}

/* ===== Locations (cards) ===== */
.locations-container{
  display:flex; flex-wrap:wrap; justify-content:center; gap:2rem;
  max-width:900px; margin:2rem auto 4rem;
}
.location-card{
  text-align:center; width:100%; max-width:none; display:flex; flex-direction:column;
  border:0; border-radius:var(--radius-md); box-shadow:var(--clr-card-shadow);
  transition:transform var(--elevate), box-shadow var(--elevate); background:#fff;
}
@media (min-width:576px){ .location-card{ width:auto; max-width:260px; } }
.location-card:hover,
.location-card:focus-within{ transform:translateY(-3px); box-shadow:var(--clr-card-shadow-hover); }

.location-media{
  display:grid; place-items:center; padding:12px 14px;
  border-bottom:1px solid rgba(0,0,0,0.06); min-height:120px; background:#fff;
  border-top-left-radius:var(--radius-md); border-top-right-radius:var(--radius-md);
}
.location-logo{ max-height:100%; max-width:100%; object-fit:contain; display:block; }
.location-card .card-body{ display:flex; flex-direction:column; align-items:center; justify-content:center; padding:14px 16px 16px; }
.location-title{ margin:0 0 0.25rem; font-weight:700; }
.location-desc{ margin:0.25rem 0 0; color:#6c757d; font-weight:600; font-size:0.92rem; }

/* Neutralise global styles inside cards */
.card.location-card{ border:0; }
.card.location-card img{ box-shadow:none; background:transparent; padding:0; border:0; }

/* ===== Articles layout ===== */
.content-wrapper{ display:flex; flex-wrap:wrap; gap:20px; }
.main-content{ flex:1 1 60%; min-width:300px; }
.main-content img{ max-width:100%; width:80%; height:auto; display:block; margin:0 auto; }
.article-links{ flex:0 0 30%; min-width:200px; text-align:left; }
.article-links h4{ text-align:left; margin:0 0 0.5em 0; padding:0; }
.article-links ul{ list-style:none; padding:0; margin:0; }
.article-links li{ margin-bottom:0.5em; }

/* ===== Forms & selects ===== */
select option{ padding:5px; }

/* ===== Degree logos ===== */
.degree-style{ width:100%; max-width:120px; height:auto; }

/* ===== Optional W3 navbar helpers ===== */
.w3-top .w3-bar{ display:flex; justify-content:center; }
.w3-bar .w3-bar-item{ display:flex; align-items:center; justify-content:center; }

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion:reduce){
  *{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
    scroll-behavior:auto !important;
  }
}

/* ===== Responsive adjustments ===== */
@media (max-width:800px){
  .content-wrapper{ flex-direction:column; }
  .article-links{ order:2; }
}
@media (max-width:768px){
  h3{ letter-spacing:0.08em; }
  .letters{ letter-spacing:0.08em; }
  .picture-main{ margin:0 30px; }

  .nav-toggle{ display:none; }
  .nav-mobile{ display:none; }
  .nav-toggle:checked ~ .nav-mobile{ display:block; }
  .nav-mobile .w3-bar-item{ display:block; }

  .main-content{ padding-top:2rem; }
}

/* =========================
   Global and header layout
   ========================= */
.site-header .fixed-top{
  position:fixed;
  top:0; left:0; right:0;
  z-index:1030;
}
.site-header .navbar{
  background-color:rgba(255,255,255,0.8) !important; /* translucent white */
  backdrop-filter:blur(6px); /* frosted glass effect */
  border:none;
}

/* =========================
   Desktop mega menu (left intact)
   ========================= */
@media (min-width:992px){
  .desktop-mainnav .nav-item.dropdown{ position:static; }
  .desktop-mainnav .dropdown-menu{
    min-height:300px;
    left:0; right:0;
    border-radius:0 !important;
    background-color:#000;
    border:none;
    box-shadow:none;
  }
  .desktop-mainnav .dropdown-menu .row{ justify-content:center; }
  .desktop-mainnav .dropdown-menu a{ color:#fff !important; }
  .desktop-mainnav .dropdown-menu h6{
    color:#fff; font-weight:700; margin-bottom:.5rem;
  }
  .desktop-mainnav .dropdown-menu a{
    font-weight:600; font-size:1rem;
  }
  .desktop-mainnav .dropdown-menu a:hover{ text-decoration:underline !important; }

  .desktop-mainnav .nav-link{
    display:flex; align-items:center;
    font-size:1.1rem; font-weight:600;
    letter-spacing:.01em; line-height:1.3;
  }

  /* Chevron indicator using SVG mask so it inherits currentColor */
  .desktop-mainnav .nav-item.dropdown > .nav-link::after{
    content:"";
    display:inline-block;
    width:1em; height:1em; margin-left:.4em;
    background-color:currentColor;
    -webkit-mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M6.7 9.3a1 1 0 0 1 1.4 0L12 13.2l3.9-3.9a1 1 0 1 1 1.4 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.7a1 1 0 0 1 0-1.4z'/%3E%3C/svg%3E") no-repeat 50% 50%;
    mask:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M6.7 9.3a1 1 0 0 1 1.4 0L12 13.2l3.9-3.9a1 1 0 1 1 1.4 1.4l-4.6 4.6a1 1 0 0 1-1.4 0L6.7 10.7a1 1 0 0 1 0-1.4z'/%3E%3C/svg%3E") no-repeat 50% 50%;
    transform-origin:50% 50%;
    transition:transform .22s ease;
  }

  /* Rotate upwards on hover, focus, or when open */
  .desktop-mainnav .nav-item.dropdown:hover > .nav-link::after,
  .desktop-mainnav .nav-item.dropdown:focus-within > .nav-link::after,
  .desktop-mainnav .nav-item.dropdown.show > .nav-link::after{
    transform:rotate(180deg);
  }

  /* Show mega menu on hover and keyboard focus */
  .desktop-mainnav .nav-item.dropdown:hover > .dropdown-menu{ display:block; }
  .desktop-mainnav .nav-item.dropdown:focus-within > .dropdown-menu{ display:block; }
}

/* Fallback when mask is unsupported */
@supports not (mask:url("")){
  .desktop-mainnav .nav-item.dropdown > .nav-link::after{
    content:" Ë…";
    background:none;
    width:auto; height:auto; margin-left:.4em;
    font-size:1em; line-height:1;
  }
  .desktop-mainnav .nav-item.dropdown:hover > .nav-link::after,
  .desktop-mainnav .nav-item.dropdown:focus-within > .nav-link::after,
  .desktop-mainnav .nav-item.dropdown.show > .nav-link::after{
    content:" Ë„";
  }
}

/* =========================
   Mobile menu panel
   ========================= */
#mobileNav{ background-color:#fff; }
#mobileNav .mobile-scroller{
  max-height:calc(100vh - var(--header-h,64px));
  overflow-y:auto;
}
#mobileNav a{ font-weight:600; font-size:1.05rem; }
#mobileNav h5,#mobileNav h6{ font-weight:700; }

/* =========================
   Mega menu column styling
   ========================= */
.mega-col h6{ font-weight:700; font-size:.95rem; margin-bottom:.5rem; }
.mega-col a{ display:block; padding:.25rem 0; }

/* =========================
   Treatment grid tiles
   ========================= */
.tile{ display:block; text-decoration:none; }
.tile-figure{
  position:relative; height:200px;
  border-radius:0.75rem; overflow:hidden;
  box-shadow:0 1px 3px rgba(0,0,0,.08);
  transition:transform .25s ease, box-shadow .25s ease;
  will-change:transform;
}
.tile-img{
  width:100%; height:100%; object-fit:cover;
  transition:transform .35s ease, filter .35s ease;
  will-change:transform;
}

/* Soft gradient overlay */
.tile-figure::after{
  content:"";
  position:absolute; inset:0;
  background:linear-gradient(to top, rgba(0,0,0,.55) 0%, rgba(0,0,0,.15) 45%, rgba(0,0,0,0) 70%);
  opacity:.85;
  transition:opacity .3s ease;
  pointer-events:none;
  z-index:1;
}

/* Caption */
.tile-caption{
  position:absolute; left:0; right:0; bottom:0;
  text-align:center; color:#fff; font-weight:600;
  padding:.5rem .75rem;
  background:rgba(33,33,33,.45);
  backdrop-filter:saturate(130%) blur(2px);
  transition:background .3s ease;
  z-index:2;
}

/* Hover and focus states */
.tile:hover .tile-figure,
.tile:focus-visible .tile-figure{
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(0,0,0,.12);
}
.tile:hover .tile-img,
.tile:focus-visible .tile-img{
  transform:scale(1.04);
  filter:saturate(1.1);
}
.tile:hover .tile-caption,
.tile:focus-visible .tile-caption{ background:rgba(33,33,33,.6); }
.tile:focus-visible{ outline:none; }
.tile:focus-visible .tile-figure{
  box-shadow:0 0 0 .25rem rgba(13,110,253,.25), 0 8px 24px rgba(0,0,0,.12);
}

/* Respect reduced motion for tiles and latest features */
@media (prefers-reduced-motion:reduce){
  .tile-figure,.tile-img,.tile-caption,.tile-figure::after{ transition:none; }
  .desktop-mainnav .nav-item.dropdown > .nav-link::after{ transition:none; }
}

/* Picture raising effect for latest features */
#latest_features .ratio{
  position:relative; overflow:hidden;
  border-radius:0.75rem;
  transition:transform .25s ease, box-shadow .25s ease;
  will-change:transform;
}
#latest_features img{
  transition:transform .35s ease, filter .35s ease;
  will-change:transform;
}
#latest_features .ratio:hover,
#latest_features .ratio:focus-within{
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(0,0,0,.15);
}
#latest_features .ratio:hover img,
#latest_features .ratio:focus-within img{
  transform:scale(1.05);
  filter:saturate(1.1);
}
@media (prefers-reduced-motion:reduce){
  #latest_features .ratio,#latest_features img{ transition:none; }
}

@media (min-width: 992px){
  html, body { scroll-padding-top: calc(var(--navbar-height) + 24px); }
  main { padding-top: calc(var(--navbar-height) + 34px); }
}

@media (max-width: 767.98px){
  .navbar { min-height: 64px; } /* adjust if needed */

  /* Centre both grid items */
  .navbar .navbar-brand,
  .navbar .navbar-toggler { align-self: center; }

  /* Vertically centre the two-line brand */
  .navbar .navbar-brand{
    display: flex;
    flex-direction: column;
    justify-content: center;
    line-height: 1.1;
    text-align: center;
  }

  /* Remove stray margins/padding on brand headings only */
  .navbar .navbar-brand h1,
  .navbar .navbar-brand h2,
  .navbar .navbar-brand h3,
  .navbar .navbar-brand small { margin: 0; }
  .navbar .navbar-brand h3 { padding-top: 0; } /* overrides global h3 padding */
}


  .navbar .navbar-toggler{
    margin-top: 0 !important;
    margin-bottom: 0 !important; /* keeps it visually centred */
  }

.navbar .navbar-toggler{
  border: 0 !important;
  box-shadow: none !important; /* use your focus-visible outline instead */
}
